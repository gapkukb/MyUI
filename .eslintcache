[{"C:\\workspace\\ui\\src\\index.tsx":"1","C:\\workspace\\ui\\src\\reportWebVitals.ts":"2","C:\\workspace\\ui\\src\\App.tsx":"3","C:\\workspace\\ui\\src\\package\\icon\\index.tsx":"4","C:\\workspace\\ui\\src\\package\\button\\index.tsx":"5","C:\\workspace\\ui\\src\\package\\field\\index.tsx":"6","C:\\workspace\\ui\\src\\util\\bem.ts":"7","C:\\workspace\\ui\\src\\util\\unit.ts":"8","C:\\workspace\\ui\\src\\util\\index.ts":"9","C:\\workspace\\ui\\src\\util\\type.ts":"10","C:\\workspace\\ui\\src\\package\\loading\\index.tsx":"11","C:\\workspace\\ui\\src\\util\\regexp.ts":"12","C:\\workspace\\ui\\src\\util\\dom.ts":"13","C:\\workspace\\ui\\src\\util\\global.ts":"14","C:\\workspace\\ui\\src\\package\\stepper\\index.tsx":"15","C:\\workspace\\ui\\src\\package\\switch\\index.tsx":"16","C:\\workspace\\ui\\src\\package\\portal\\index.tsx":"17","C:\\workspace\\ui\\src\\package\\dialog\\index.tsx":"18","C:\\workspace\\ui\\src\\package\\portal\\pure.tsx":"19","C:\\workspace\\ui\\src\\package\\popup\\index.tsx":"20","C:\\workspace\\ui\\src\\package\\portal\\util.ts":"21"},{"size":664,"mtime":1614649325486,"results":"22","hashOfConfig":"23"},{"size":440,"mtime":1612460464033,"results":"24","hashOfConfig":"23"},{"size":2553,"mtime":1615968488889,"results":"25","hashOfConfig":"23"},{"size":1086,"mtime":1615251077383,"results":"26","hashOfConfig":"27"},{"size":2952,"mtime":1615552105700,"results":"28","hashOfConfig":"27"},{"size":8264,"mtime":1615381334603,"results":"29","hashOfConfig":"27"},{"size":919,"mtime":1612852215479,"results":"30","hashOfConfig":"27"},{"size":592,"mtime":1615254407065,"results":"31","hashOfConfig":"27"},{"size":1797,"mtime":1615370824856,"results":"32","hashOfConfig":"23"},{"size":1828,"mtime":1613266652038,"results":"33","hashOfConfig":"23"},{"size":2063,"mtime":1615538587012,"results":"34","hashOfConfig":"27"},{"size":476,"mtime":1615292408862,"results":"35","hashOfConfig":"23"},{"size":4331,"mtime":1615705391210,"results":"36","hashOfConfig":"23"},{"size":1082,"mtime":1615575446282,"results":"37","hashOfConfig":"23"},{"size":4479,"mtime":1615382398017,"results":"38","hashOfConfig":"27"},{"size":1675,"mtime":1615454650140,"results":"39","hashOfConfig":"27"},{"size":6430,"mtime":1615720995653,"results":"40","hashOfConfig":"23"},{"size":1434,"mtime":1612852753970,"results":"41","hashOfConfig":"27"},{"size":1775,"mtime":1615968408425,"results":"42","hashOfConfig":"23"},{"size":456,"mtime":1615643070335,"results":"43","hashOfConfig":"23"},{"size":2926,"mtime":1615710150683,"results":"44","hashOfConfig":"23"},{"filePath":"45","messages":"46","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":"47","usedDeprecatedRules":"48"},"2fh3k2",{"filePath":"49","messages":"50","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"51","messages":"52","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"53","messages":"54","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},"gsctrs",{"filePath":"56","messages":"57","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":1,"source":null},{"filePath":"58","messages":"59","errorCount":0,"warningCount":10,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"60","messages":"61","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"62"},{"filePath":"63","messages":"64","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"65","messages":"66","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"67","messages":"68","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"69","messages":"70","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"55"},{"filePath":"71","messages":"72","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"73","messages":"74","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"75","messages":"76","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"48"},{"filePath":"77","messages":"78","errorCount":0,"warningCount":4,"fixableErrorCount":0,"fixableWarningCount":0,"source":"79","usedDeprecatedRules":"80"},{"filePath":"81","messages":"82","errorCount":0,"warningCount":2,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"83","messages":"84","errorCount":0,"warningCount":5,"fixableErrorCount":0,"fixableWarningCount":0,"source":"85","usedDeprecatedRules":"48"},{"filePath":"86","messages":"87","errorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0},{"filePath":"88","messages":"89","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"90","messages":"91","errorCount":0,"warningCount":9,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"92","messages":"93","errorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"94","usedDeprecatedRules":"48"},"C:\\workspace\\ui\\src\\index.tsx",["95","96"],"import React from \"react\";\r\nimport ReactDOM from \"react-dom\";\r\nimport App from \"./App\";\r\nimport { config } from \"./package/async-view\";\r\nimport reportWebVitals from \"./reportWebVitals\";\r\nimport \"./stylus/index.styl\";\r\nimport { version } from \"../package.json\";\r\n\r\n// document.documentElement.dataset.ui = version;\r\n\r\nReactDOM.render(\r\n\t<React.StrictMode>\r\n\t\t<App />\r\n\t</React.StrictMode>,\r\n\tdocument.getElementById(\"app\")\r\n);\r\n\r\n// If you want to start measuring performance in your app, pass a function\r\n// to log results (for example: reportWebVitals(console.log))\r\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\r\nreportWebVitals();\r\n",["97","98"],"C:\\workspace\\ui\\src\\reportWebVitals.ts",[],"C:\\workspace\\ui\\src\\App.tsx",["99","100"],"C:\\workspace\\ui\\src\\package\\icon\\index.tsx",[],["101","102"],"C:\\workspace\\ui\\src\\package\\button\\index.tsx",["103","104","105","106"],"C:\\workspace\\ui\\src\\package\\field\\index.tsx",["107","108","109","110","111","112","113","114","115","116"],"C:\\workspace\\ui\\src\\util\\bem.ts",[],["117","118"],"C:\\workspace\\ui\\src\\util\\unit.ts",[],"C:\\workspace\\ui\\src\\util\\index.ts",[],"C:\\workspace\\ui\\src\\util\\type.ts",[],"C:\\workspace\\ui\\src\\package\\loading\\index.tsx",[],"C:\\workspace\\ui\\src\\util\\regexp.ts",[],"C:\\workspace\\ui\\src\\util\\dom.ts",[],"C:\\workspace\\ui\\src\\util\\global.ts",[],"C:\\workspace\\ui\\src\\package\\stepper\\index.tsx",["119","120","121","122"],"import { FC, CSSProperties, useState, useRef, FormEvent, useEffect, KeyboardEvent } from \"react\";\r\nimport classnames from \"classnames\";\r\nimport \"./index.styl\";\r\nimport { FieldProps } from \"../field\";\r\nimport Button, { ButtonProps } from \"../button\";\r\nimport { call, number } from \"../../util\";\r\nimport { fixUnit } from \"../../util/unit\";\r\nexport type StepperProps = Partial<{\r\n\t/** 最小值，失去焦点时触发 */\r\n\tmin: Numeric;\r\n\t/** 最大值，失去焦点时触发 */\r\n\tmax: Numeric;\r\n\t/** 步长 */\r\n\tstep: Numeric;\r\n\t/** 小数位 */\r\n\tdecimal: Numeric;\r\n\t/** 异步函数,参数是需要设置的具体值,函参done的回参-false 不变,true正常变化 numeric 直接设置值 */\r\n\tasyncFunc: (done: (ret: boolean | Numeric) => void, value?: Numeric) => void;\r\n\t/** 可输入数字 */\r\n\teditable: boolean;\r\n\t/** 显示减少按钮 */\r\n\tshowDecrease: boolean;\r\n\t/** 显示增加按钮 */\r\n\tshowIncrease: boolean;\r\n\t/** 禁用减少按钮 */\r\n\tdisableDecrease: boolean;\r\n\t/** 禁用增加按钮 */\r\n\tdisableIncrease: boolean;\r\n\t/** 按钮大小 */\r\n\tbuttonSize: ButtonProps[\"size\"];\r\n\t/** 文字对齐 */\r\n\talign: FieldProps[\"inputAlign\"];\r\n\t/** 回调函数 */\r\n\tonChange: (output: number) => any;\r\n}> &\r\n\tPick<FieldProps, \"width\" | \"defaultValue\" | \"disabled\" | \"readOnly\" | \"placeholder\" | \"formatter\" | \"trigger\">;\r\n\r\nexport const Stepper: CFC<StepperProps> = ({\r\n\tmin,\r\n\tmax,\r\n\tdecimal: _decimal = 0,\r\n\twidth,\r\n\tdefaultValue,\r\n\treadOnly,\r\n\tplaceholder,\r\n\tstep = 1,\r\n\tasyncFunc,\r\n\teditable,\r\n\tshowDecrease,\r\n\tshowIncrease,\r\n\tdisableDecrease,\r\n\tdisableIncrease,\r\n\tdisabled,\r\n\tclassName,\r\n\tstyle,\r\n\tchildren,\r\n\tformatter,\r\n\tbuttonSize = \"mini\",\r\n\talign = \"center\",\r\n\tonChange,\r\n\t...rest\r\n}) => {\r\n\tconst decimal = number(_decimal)!;\r\n\tconst [value, setValue] = useState(number(defaultValue));\r\n\tconst inputRef = useRef<HTMLInputElement>(null);\r\n\r\n\tconst _disableDecrease = disabled || disableDecrease || ((value && min && value <= min) as boolean);\r\n\tconst _disableIncrease = disabled || disableIncrease || ((value && max && value >= max) as boolean);\r\n\r\n\tfunction update(input: number | FormEvent<HTMLInputElement>) {\r\n\t\tlet output: number;\r\n\t\tif (typeof input === \"number\") {\r\n\t\t\toutput = input;\r\n\t\t} else {\r\n\t\t\tconst el = input.currentTarget;\r\n\t\t\toutput = el.valueAsNumber;\r\n\t\t\tif (input.type === \"blur\") {\r\n\t\t\t\tif (max && output > max) {\r\n\t\t\t\t\toutput = Number(max);\r\n\t\t\t\t} else if (min && output < min) {\r\n\t\t\t\t\toutput = Number(min);\r\n\t\t\t\t}\r\n\t\t\t\tif (formatter) {\r\n\t\t\t\t\toutput = formatter(output);\r\n\t\t\t\t}\r\n\t\t\t\tel.value = \"\";\r\n\t\t\t\tel.value = ((output as unknown) as string) || \"\";\r\n\t\t\t} else {\r\n\t\t\t\tif ((max && output > max) || (min && output < min)) {\r\n\t\t\t\t\treturn;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\tif (output === value) return;\r\n\t\tif (asyncFunc) {\r\n\t\t\t// asyncFunc();\r\n\t\t}\r\n\t\tsetValue(output);\r\n\t\tcall(onChange, output);\r\n\t}\r\n\tfunction press(e: KeyboardEvent<HTMLInputElement>) {\r\n\t\tconst el = e.currentTarget;\r\n\t\tconst key = e.key;\r\n\t\tconst value = el.value;\r\n\t\tconst index = value.indexOf(\".\");\r\n\t\t//  处理+ - . 三种符号和小数位\r\n\t\tif (\r\n\t\t\tkey === \"+\" ||\r\n\t\t\t(key === \"0\" && value === \"\") ||\r\n\t\t\t(key === \".\" && (decimal === 0 || value === \"\")) ||\r\n\t\t\t(key === \"-\" && ((min && min >= 0) || !el.validity.valid)) ||\r\n\t\t\t(index !== -1 && value.substring(index).length > decimal)\r\n\t\t) {\r\n\t\t\te.preventDefault();\r\n\t\t\treturn false;\r\n\t\t}\r\n\t}\r\n\r\n\tfunction set(action: \"stepDown\" | \"stepUp\") {\r\n\t\tconst el = inputRef.current!;\r\n\t\tel[action]();\r\n\t\tupdate(el.valueAsNumber);\r\n\t}\r\n\tconst decrease = set.bind(null, \"stepDown\");\r\n\tconst increase = set.bind(null, \"stepUp\");\r\n\treturn (\r\n\t\t<div className=\"stepper\" style={{ width: fixUnit(width) }}>\r\n\t\t\t<Button\r\n\t\t\t\tborderless\r\n\t\t\t\tround=\"no\"\r\n\t\t\t\ticon=\"wifi\"\r\n\t\t\t\tsize={buttonSize}\r\n\t\t\t\tdisabled={_disableDecrease}\r\n\t\t\t\tonClick={decrease}\r\n\t\t\t/>\r\n\t\t\t<input\r\n\t\t\t\tclassName={classnames(\"stepper__value\", align)}\r\n\t\t\t\ttype=\"number\"\r\n\t\t\t\tdefaultValue={value}\r\n\t\t\t\treadOnly={!editable}\r\n\t\t\t\tstep={step}\r\n\t\t\t\tonChange={update}\r\n\t\t\t\tonBlur={update}\r\n\t\t\t\tonKeyPress={press}\r\n\t\t\t\trole=\"stepper\"\r\n\t\t\t\tref={inputRef}\r\n\t\t\t\tmin={min}\r\n\t\t\t\tmax={max}\r\n\t\t\t\tplaceholder={placeholder}\r\n\t\t\t\taria-valuemin={min as number}\r\n\t\t\t\taria-valuemax={max as number}\r\n\t\t\t\taria-valuenow={(value as unknown) as number}\r\n\t\t\t/>\r\n\t\t\t<Button\r\n\t\t\t\tborderless\r\n\t\t\t\tround=\"no\"\r\n\t\t\t\ticon=\"wifi\"\r\n\t\t\t\tsize={buttonSize}\r\n\t\t\t\tdisabled={_disableIncrease}\r\n\t\t\t\tonClick={increase}\r\n\t\t\t/>\r\n\t\t</div>\r\n\t);\r\n};\r\nStepper.displayName = Stepper.name;\r\nexport default Stepper;\r\n",["123","124"],"C:\\workspace\\ui\\src\\package\\switch\\index.tsx",["125","126"],"C:\\workspace\\ui\\src\\package\\portal\\index.tsx",["127","128","129","130","131"],"import {\n\tCSSProperties,\n\tforwardRef,\n\tReactNode,\n\tRefObject,\n\tuseEffect,\n\tuseImperativeHandle,\n\tuseLayoutEffect,\n\tuseMemo,\n\tuseRef,\n} from \"react\";\nimport { call, nope } from \"../../util\";\nimport classnames from \"classnames\";\nimport { PurePortal, PurePortalProps as _ } from \"./pure\";\nimport { CSR, on, querySelector, scrollbarWidth, setStyle } from \"../../util/dom\";\nimport memoize from \"memoize-one\";\nimport { patchElement, diffStyle, restoreElement, MountElement, assinStyle } from \"./util\";\nimport \"./index.styl\";\n\nexport { PurePortal };\nexport type PurePortalProps = _;\n/* \n弹层出现后,不希望body滚动,最佳实践是在移动端不要使用body作为容器,而使用一个根div容器,\n设置根div heigt:100vh;width:100vw;overflow:hidden auto\n*/\n\nexport enum ActionType {\n\t/** 点击确认按钮 */\n\tConfirm,\n\t/** 点击取消按钮 */\n\tCancel,\n\t/** 点击关闭按钮 */\n\tClose,\n\t/** 点击背景 */\n\tOverlay,\n\t/** 键盘esc抬起 */\n\tEsc,\n\t/** 点击外部 */\n\tOutside,\n\t/** 路由变化 */\n\tRouter,\n}\nexport type PortalProps = Partial<{\n\tid: string;\n\ttitle: string;\n\tcontent: string;\n\tclassName: string;\n\toverClasName: string;\n\ttype: string;\n\tstyle: CSSProperties;\n\toverlayStyle: CSSProperties;\n\ticon: \"loading\" | \"success\" | \"fail\" | \"warn\" | \"danger\";\n\toverlay: boolean;\n\tlockScroller: boolean;\n\topacity: Numeric;\n\tclosable: boolean;\n\tcloseIcon: string;\n\tcloseIconSide: \"left\" | \"right\";\n\tcloseByOutside: boolean;\n\tcloseByOverlay: boolean;\n\tcloseByESC: boolean;\n\tchildren: ReactNode;\n\tanimate: string;\n\tposition: \"left\" | \"right\" | \"top\" | \"bottom\" | \"center\" | [Numeric, Numeric];\n\ttime: number;\n\tarea: [Numeric?, Numeric?, Numeric?, Numeric?];\n\tmaxWidth: Numeric;\n\tmaxHeight: Numeric;\n\tfullscreen: boolean;\n\tdragable: boolean;\n\tdragAxis: \"x\" | \"y\" | \"all\";\n\tresize: boolean;\n\tbuttons: { text: string; id: Numeric; disabled: boolean; style: CSSProperties }[];\n\tvisible: boolean;\n\tonOpen(): void;\n\tonBeforeClose: AsyncCallBack<boolean | void, ActionType>;\n\tonClose(action: ActionType): void;\n\ttag: keyof HTMLElementTagNameMap;\n}> &\n\tPartial<PurePortalProps>;\n\nexport interface PortalImperativeHandlers {\n\tcontains(node: Node): boolean;\n\tpurePortalRef: RefObject<PurePortal | undefined>;\n\tcontainer: HTMLElement;\n}\n\nexport const Portal = forwardRef<PortalImperativeHandlers, PortalProps>((props, ref) => {\n\tconst {\n\t\tvisible = true,\n\t\ttag = \"div\",\n\t\tselector = document.body,\n\t\tcloseByESC,\n\t\tcloseByOutside,\n\t\tcloseByOverlay,\n\t\tlockScroller,\n\t\treplace,\n\t\tchildren,\n\t\tclassName,\n\t\tstyle,\n\t\tonBeforeClose,\n\t\tonClose,\n\t\tonOpen,\n\t} = props;\n\n\t// 背景层\n\tconst node = useMemo(() => (CSR ? document.createElement(tag) : null), [tag]) as HTMLElement;\n\t// 缓存对父级的引用\n\tconst getParent = useMemo(() => memoize(querySelector), []);\n\t// 缓存属性\n\tconst propsRef = useRef<PortalProps>(props);\n\tpropsRef.current = props;\n\tconst styleRef = useRef<CSSProperties | undefined>(style);\n\tconst purePortalRef = useRef<PurePortal>(null);\n\n\tconst closeAction = (action: ActionType) => {\n\t\tconst f = () => call(onClose, action);\n\t\tonBeforeClose ? onBeforeClose((state) => state && f(), action) : f();\n\t};\n\t// 函数组件不能对外暴露属性,\n\t// 使用useImperativeHandle 结合 forwardRef高阶组件,用来使ref对象对外暴露属性\n\tuseImperativeHandle<PortalImperativeHandlers, PortalImperativeHandlers>(\n\t\tref,\n\t\t() => ({\n\t\t\tcontains(node: Node) {\n\t\t\t\treturn purePortalRef.current?.contains(node) || false;\n\t\t\t},\n\t\t\tpurePortalRef: purePortalRef,\n\t\t\tcontainer: node,\n\t\t}),\n\t\t[node]\n\t);\n\t// 给背景层添加类名\n\tuseLayoutEffect(() => {\n\t\tclassName && (node.className = className);\n\t}, [node, className]);\n\t// 增量更新行内样式\n\tuseLayoutEffect(() => {\n\t\tconst result = diffStyle(styleRef.current || {}, style || {});\n\t\tsetStyle(node, result);\n\t\tstyleRef.current = style;\n\t}, [node, className]);\n\n\t// 当处于打开状态时,给蒙层添加定位\n\tuseLayoutEffect(() => {\n\t\tif (!visible || !closeByOverlay) return nope;\n\t\t// Promise.resolve().then(() => node.classList.add(\"fade\"));\n\t\tconst { position, left, right, top, bottom } = node.style;\n\t\tconst parent = getParent(selector);\n\n\t\tassinStyle(node, 0, 0, 0, 0, parent === document.body ? \"fixed\" : \"absolute\");\n\t\treturn () => assinStyle(node, left, right, top, bottom, position);\n\t}, [visible, selector, closeByOverlay, node, getParent]);\n\n\t// 锁定挂载对象,不允许滚动\n\tuseLayoutEffect(() => {\n\t\tconst parent = getParent(selector) as HTMLElement;\n\t\tconst size = scrollbarWidth(parent);\n\t\t// 判断是否打开状态,是否需要锁定,对象是否有滚动条\n\t\tif (!visible || !lockScroller || !size) return nope;\n\t\tpatchElement(parent, size);\n\t\tparent.classList.add(\"locked\");\n\t\treturn () => {\n\t\t\trestoreElement(parent);\n\t\t\tparent.classList.remove(\"locked\");\n\t\t};\n\t}, [selector, visible, lockScroller, getParent]);\n\n\t// 点击外部元素时关闭组件\n\tuseLayoutEffect(() => {\n\t\tlet cancel = nope;\n\t\t//如果开启了点击外部元素关闭\n\t\tif (closeByOutside) {\n\t\t\t// 如果有蒙层那么监听蒙层,否则监听整个window对象\n\t\t\tcancel = on(closeByOverlay ? node : window, \"click\", (e: MouseEvent) => {\n\t\t\t\tconst { visible } = propsRef.current;\n\t\t\t\tconst purePortal = purePortalRef.current;\n\t\t\t\tif (e.defaultPrevented || !visible || !purePortal) return;\n\t\t\t\tconst el = e.target;\n\t\t\t\t// 如果点击的不是node节点,或者不是组件元素本身,或者也不是组件的子元素,那么执行关闭逻辑\n\t\t\t\tif (el === node || !purePortal.contains(node)) {\n\t\t\t\t\tcloseAction(closeByOverlay ? ActionType.Overlay : ActionType.Outside);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\t\tcall(onOpen);\n\t\treturn cancel;\n\t}, [closeByOverlay, closeByOutside, node]);\n\n\t// ESC按键关闭\n\tuseEffect(() => {\n\t\tif (!closeByESC || !visible) return nope;\n\t\treturn on(document.body, \"keyup\", function (e) {\n\t\t\tconst esc = e.key === \"Escape\" || e.key === \"Esc\" || e.keyCode === 27;\n\t\t\tesc && closeAction(ActionType.Esc);\n\t\t});\n\t}, [closeByESC, visible]);\n\n\t// 挂载元素\n\tuseLayoutEffect(() => {\n\t\tconst parent = getParent(selector);\n\t\tif (!parent) return console.error(\"Maybe error: cannot mount the portal cause by invalid elment as null\");\n\t\tparent.appendChild(node);\n\t\treturn () => {\n\t\t\tparent.removeChild(node);\n\t\t};\n\t}, [node, selector, getParent]);\n\n\treturn visible && node ? (\n\t\t<PurePortal ref={purePortalRef} replace={replace} selector={node}>\n\t\t\t{/* <div className=\"popup\">{children}</div> */}\n\t\t\t{children}\n\t\t</PurePortal>\n\t) : null;\n});\n","C:\\workspace\\ui\\src\\package\\dialog\\index.tsx",[],"C:\\workspace\\ui\\src\\package\\portal\\pure.tsx",["132"],"C:\\workspace\\ui\\src\\package\\popup\\index.tsx",["133","134","135","136","137","138","139","140","141"],"C:\\workspace\\ui\\src\\package\\portal\\util.ts",["142"],"import { CSSProperties, useLayoutEffect } from \"react\";\n\ninterface PatchMeta {\n\tcount: number;\n\tpaddingRight: CSSStyleDeclaration[\"paddingRight\"];\n\toverflow: CSSStyleDeclaration[\"overflow\"];\n}\n// 使用 new Map 存储元素的css属性的原本的值,用于更改之后的还原css\nconst patched = new Map<HTMLElement, PatchMeta>();\nexport function patchElement(parent: HTMLElement, size: number) {\n\tconst meta = patched.get(parent);\n\tif (meta) {\n\t\tmeta.count += 1;\n\t} else {\n\t\tconst { overflow, paddingRight } = parent.style;\n\t\t// 在原来的padding-right基础上增加滚动条宽度\n\t\tconst PDR = getComputedStyle(parent).paddingRight;\n\t\tconst newPDR = parseFloat(PDR) || 0 + size;\n\t\tObject.assign(parent.style, {\n\t\t\toverflow: \"hidden\",\n\t\t\tpaddingRight: newPDR + \"px\",\n\t\t});\n\t\tpatched.set(parent, {\n\t\t\tcount: 1,\n\t\t\toverflow,\n\t\t\tpaddingRight,\n\t\t});\n\t}\n}\nexport function restoreElement(parent: HTMLElement) {\n\tconst meta = patched.get(parent);\n\tif (!meta) {\n\t\tthrow new Error(\"This looks like a bug of component,contact us\");\n\t}\n\tif (meta.count === 1) {\n\t\tpatched.delete(parent);\n\t\tObject.assign(parent.style, {\n\t\t\toverflow: meta.overflow,\n\t\t\tpaddingRight: meta.paddingRight,\n\t\t});\n\t} else {\n\t\tmeta.count -= 1;\n\t}\n}\n\nexport function diffStyle<T = CSSProperties>(prev: T = {} as any, next: T = {} as any) {\n\tconst ret = {} as T;\n\tconst prevKeys = Object.keys(prev);\n\tconst nextKeys = Object.keys(next);\n\tlet i = prevKeys.length;\n\tlet key = \"\";\n\twhile (i--) {\n\t\tkey = prevKeys[i];\n\t\t// @ts-ignore\n\t\tif (!next[key]) ret[key] = \"\";\n\t}\n\ti = prevKeys.length;\n\twhile (i--) {\n\t\tkey = nextKeys[i];\n\t\t// @ts-ignore\n\t\tret[key] = next[key];\n\t}\n\treturn ret;\n}\n\nlet zindex = 100;\nconst outclickEvent = new CustomEvent(\"outclick\");\nconst overlay = {\n\tel: document.createElement(\"div\"),\n\ttoggle(value: \"none\" | \"\") {\n\t\tObject.assign(this.el.style, {\n\t\t\tdisplay: value,\n\t\t\tzIndex: zindex,\n\t\t});\n\t},\n\tshow() {\n\t\tzindex++;\n\t\tthis.toggle(\"\");\n\t},\n\thide() {\n\t\tzindex--;\n\t\tthis.toggle(\"none\");\n\t},\n\tinit() {\n\t\tthis.el.className = \"overlay\";\n\t\tdocument.body.appendChild(this.el);\n\t\tthis.el.onclick = function () {\n\t\t\tdocument.dispatchEvent(outclickEvent);\n\t\t};\n\t\tthis.hide();\n\t\treturn this;\n\t},\n}.init();\n\nexport function assinStyle(node: HTMLElement, left: Numeric, right: Numeric, top: Numeric, bottom: Numeric, p: string) {\n\tObject.assign(node.style, {\n\t\tleft,\n\t\tright,\n\t\ttop,\n\t\tbottom,\n\t\tposition: p,\n\t});\n}\n\nexport interface IMountElementProps {\n\tnode: HTMLElement;\n\tgetParent(selector: Element | string): Element | null;\n\tselector: Element | string;\n}\n\nexport const MountElement = ({ node, getParent, selector }: IMountElementProps) => {\n\tuseLayoutEffect(() => {\n\t\tconst parent = getParent(selector);\n\t\tif (!parent) return console.error(\"Maybe error: cannot mount the portal cause by invalid elment as null\");\n\t\tparent.appendChild(node);\n\t\treturn () => {\n\t\t\tparent.removeChild(node);\n\t\t};\n\t}, [node, selector, getParent]);\n\treturn null;\n};\n",{"ruleId":"143","severity":1,"message":"144","line":4,"column":10,"nodeType":"145","messageId":"146","endLine":4,"endColumn":16},{"ruleId":"143","severity":1,"message":"147","line":7,"column":10,"nodeType":"145","messageId":"146","endLine":7,"endColumn":17},{"ruleId":"148","replacedBy":"149"},{"ruleId":"150","replacedBy":"151"},{"ruleId":"143","severity":1,"message":"152","line":3,"column":7,"nodeType":"145","messageId":"146","endLine":3,"endColumn":50},{"ruleId":"143","severity":1,"message":"153","line":11,"column":7,"nodeType":"145","messageId":"146","endLine":11,"endColumn":38},{"ruleId":"148","replacedBy":"154"},{"ruleId":"150","replacedBy":"155"},{"ruleId":"156","severity":1,"message":"157","line":86,"column":4,"nodeType":"158","messageId":"159","endLine":86,"endColumn":23,"fix":"160"},{"ruleId":"161","severity":1,"message":"162","line":105,"column":10,"nodeType":"163","messageId":"164","endLine":105,"endColumn":12},{"ruleId":"161","severity":1,"message":"162","line":106,"column":15,"nodeType":"163","messageId":"164","endLine":106,"endColumn":17},{"ruleId":"161","severity":1,"message":"162","line":107,"column":15,"nodeType":"163","messageId":"164","endLine":107,"endColumn":17},{"ruleId":"143","severity":1,"message":"165","line":2,"column":2,"nodeType":"145","messageId":"146","endLine":2,"endColumn":4},{"ruleId":"143","severity":1,"message":"166","line":3,"column":2,"nodeType":"145","messageId":"146","endLine":3,"endColumn":15},{"ruleId":"143","severity":1,"message":"167","line":7,"column":2,"nodeType":"145","messageId":"146","endLine":7,"endColumn":21},{"ruleId":"143","severity":1,"message":"168","line":9,"column":2,"nodeType":"145","messageId":"146","endLine":9,"endColumn":11},{"ruleId":"143","severity":1,"message":"169","line":11,"column":2,"nodeType":"145","messageId":"146","endLine":11,"endColumn":16},{"ruleId":"143","severity":1,"message":"170","line":17,"column":10,"nodeType":"145","messageId":"146","endLine":17,"endColumn":24},{"ruleId":"143","severity":1,"message":"171","line":133,"column":9,"nodeType":"145","messageId":"146","endLine":133,"endColumn":14},{"ruleId":"143","severity":1,"message":"172","line":133,"column":16,"nodeType":"145","messageId":"146","endLine":133,"endColumn":24},{"ruleId":"143","severity":1,"message":"173","line":156,"column":11,"nodeType":"145","messageId":"146","endLine":156,"endColumn":27},{"ruleId":"143","severity":1,"message":"174","line":160,"column":21,"nodeType":"145","messageId":"146","endLine":160,"endColumn":26},{"ruleId":"148","replacedBy":"175"},{"ruleId":"150","replacedBy":"176"},{"ruleId":"143","severity":1,"message":"165","line":1,"column":10,"nodeType":"145","messageId":"146","endLine":1,"endColumn":12},{"ruleId":"143","severity":1,"message":"166","line":1,"column":14,"nodeType":"145","messageId":"146","endLine":1,"endColumn":27},{"ruleId":"143","severity":1,"message":"168","line":1,"column":58,"nodeType":"145","messageId":"146","endLine":1,"endColumn":67},{"ruleId":"177","severity":1,"message":"178","line":145,"column":5,"nodeType":"179","endLine":145,"endColumn":19},{"ruleId":"148","replacedBy":"180"},{"ruleId":"150","replacedBy":"181"},{"ruleId":"143","severity":1,"message":"165","line":1,"column":10,"nodeType":"145","messageId":"146","endLine":1,"endColumn":12},{"ruleId":"143","severity":1,"message":"166","line":1,"column":14,"nodeType":"145","messageId":"146","endLine":1,"endColumn":27},{"ruleId":"143","severity":1,"message":"182","line":13,"column":8,"nodeType":"145","messageId":"146","endLine":13,"endColumn":18},{"ruleId":"143","severity":1,"message":"183","line":17,"column":51,"nodeType":"145","messageId":"146","endLine":17,"endColumn":63},{"ruleId":"184","severity":1,"message":"185","line":142,"column":5,"nodeType":"186","endLine":142,"endColumn":22,"suggestions":"187"},{"ruleId":"184","severity":1,"message":"188","line":188,"column":5,"nodeType":"186","endLine":188,"endColumn":43,"suggestions":"189"},{"ruleId":"184","severity":1,"message":"190","line":197,"column":5,"nodeType":"186","endLine":197,"endColumn":26,"suggestions":"191"},{"ruleId":"192","severity":1,"message":"193","line":7,"column":14,"nodeType":"145","messageId":"194","endLine":7,"endColumn":21},{"ruleId":"143","severity":1,"message":"195","line":1,"column":70,"nodeType":"145","messageId":"146","endLine":1,"endColumn":78},{"ruleId":"143","severity":1,"message":"196","line":2,"column":16,"nodeType":"145","messageId":"146","endLine":2,"endColumn":24},{"ruleId":"143","severity":1,"message":"197","line":6,"column":10,"nodeType":"145","messageId":"146","endLine":6,"endColumn":23},{"ruleId":"143","severity":1,"message":"198","line":117,"column":8,"nodeType":"145","messageId":"146","endLine":117,"endColumn":17},{"ruleId":"184","severity":1,"message":"199","line":137,"column":13,"nodeType":"145","endLine":137,"endColumn":20},{"ruleId":"184","severity":1,"message":"200","line":173,"column":5,"nodeType":"186","endLine":173,"endColumn":37,"suggestions":"201"},{"ruleId":"184","severity":1,"message":"190","line":182,"column":5,"nodeType":"186","endLine":182,"endColumn":23,"suggestions":"202"},{"ruleId":"184","severity":1,"message":"203","line":194,"column":5,"nodeType":"186","endLine":194,"endColumn":15,"suggestions":"204"},{"ruleId":"143","severity":1,"message":"205","line":222,"column":10,"nodeType":"145","messageId":"146","endLine":222,"endColumn":20},{"ruleId":"143","severity":1,"message":"206","line":68,"column":7,"nodeType":"145","messageId":"146","endLine":68,"endColumn":14},"@typescript-eslint/no-unused-vars","'config' is defined but never used.","Identifier","unusedVar","'version' is defined but never used.","no-native-reassign",["207"],"no-negated-in-lhs",["208"],"'onBeforeClose' is assigned a value but never used.","'onClose' is assigned a value but never used.",["207"],["208"],"no-useless-computed-key","Unnecessarily computed property [\"hairline\"] found.","Property","unnecessarilyComputedProperty",{"range":"209","text":"210"},"eqeqeq","Expected '===' and instead saw '=='.","BinaryExpression","unexpected","'FC' is defined but never used.","'CSSProperties' is defined but never used.","'InputHTMLAttributes' is defined but never used.","'useEffect' is defined but never used.","'HTMLAttributes' is defined but never used.","'preventDefault' is defined but never used.","'model' is assigned a value but never used.","'setModel' is assigned a value but never used.","'handleInputClick' is defined but never used.","'value' is assigned a value but never used.",["207"],["208"],"jsx-a11y/aria-role","Elements with ARIA roles must use a valid, non-abstract ARIA role.","JSXAttribute",["207"],["208"],"'classnames' is defined but never used.","'MountElement' is defined but never used.","react-hooks/exhaustive-deps","React Hook useLayoutEffect has a missing dependency: 'style'. Either include it or remove the dependency array.","ArrayExpression",["211"],"React Hook useLayoutEffect has missing dependencies: 'closeAction' and 'onOpen'. Either include them or remove the dependency array.",["212"],"React Hook useEffect has a missing dependency: 'closeAction'. Either include it or remove the dependency array.",["213"],"@typescript-eslint/no-redeclare","'Context' is already defined.","redeclared","'useState' is defined but never used.","'noncestr' is defined but never used.","'createElement' is defined but never used.","'getParent' is assigned a value but never used.","The ref value 'popupRef.current' will likely have changed by the time this effect cleanup function runs. If this ref points to a node rendered by React, copy 'popupRef.current' to a variable inside the effect, and use that variable in the cleanup function.","React Hook useLayoutEffect has a missing dependency: 'onOpen'. Either include it or remove the dependency array.",["214"],["215"],"React Hook useLayoutEffect has a missing dependency: 'closeByOutside'. Either include it or remove the dependency array.",["216"],"'assinStyle' is defined but never used.","'overlay' is assigned a value but never used.","no-global-assign","no-unsafe-negation",[2046,2058],"\"hairline\"",{"desc":"217","fix":"218"},{"desc":"219","fix":"220"},{"desc":"221","fix":"222"},{"desc":"223","fix":"224"},{"desc":"225","fix":"226"},{"desc":"227","fix":"228"},"Update the dependencies array to be: [node, className, style]",{"range":"229","text":"230"},"Update the dependencies array to be: [closeByOverlay, closeByOutside, node, onOpen, closeAction]",{"range":"231","text":"232"},"Update the dependencies array to be: [closeAction, closeByESC, visible]",{"range":"233","text":"234"},"Update the dependencies array to be: [closeByOverlay, closeByOutside, onOpen]",{"range":"235","text":"236"},"Update the dependencies array to be: [closeAction, closeByESC, open]",{"range":"237","text":"238"},"Update the dependencies array to be: [closeByOutside, selector]",{"range":"239","text":"240"},[3548,3565],"[node, className, style]",[5084,5122],"[closeByOverlay, closeByOutside, node, onOpen, closeAction]",[5375,5396],"[closeAction, closeByESC, visible]",[4487,4519],"[closeByOverlay, closeByOutside, onOpen]",[4766,4784],"[closeAction, closeByESC, open]",[5093,5103],"[closeByOutside, selector]"]